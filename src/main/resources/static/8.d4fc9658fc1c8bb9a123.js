(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{sHgf:function(t,e,r){"use strict";r.r(e),r.d(e,"OrderModule",(function(){return ot}));var n=r("ofXK"),i=r("tk/3"),c=r("AytR"),a=r("XNiG"),s=r("z6cu"),o=r("lJxs"),b=r("vkgz"),l=r("JIr8"),d=r("fXoL");let u=(()=>{class t{constructor(t){this.httpClient=t,this.baseUrl=c.a.baseUrl+"/api/order",this.adminUrl=c.a.baseUrl+"/api/order/management?status=PLACED",this.orderLoaded$=new a.a}getOrdersForUser(){return this.httpClient.get(this.baseUrl,{observe:"response"}).pipe(Object(o.a)(t=>this.handleResponse(t)),Object(b.a)(t=>this.orderLoaded$.next(!0)),Object(l.a)(t=>Object(s.a)(t)))}getOrdersForAdmin(t,e,r){let n=new i.f;return n=n.append("page",t),n=n.append("size",e),n=n.append("filter",r),this.httpClient.get(this.baseUrl+"/management",{observe:"response",params:n}).pipe(Object(o.a)(t=>this.handleResponse(t)),Object(l.a)(t=>Object(s.a)(t)))}getOrderDetails(t){return this.httpClient.get(this.baseUrl+"/management/"+t,{observe:"response"}).pipe(Object(o.a)(t=>this.handleResponse(t)),Object(l.a)(t=>Object(s.a)(t)))}getTransactionDetails(t){return this.httpClient.get(this.baseUrl+"/management/tx/"+t,{observe:"response"}).pipe(Object(o.a)(t=>this.handleResponse(t)),Object(l.a)(t=>Object(s.a)(t)))}handleResponse(t){if(200===(null==t?void 0:t.status))return null==t?void 0:t.body}}return t.\u0275fac=function(e){return new(e||t)(d.Vb(i.b))},t.\u0275prov=d.Hb({token:t,factory:t.\u0275fac}),t})();var p=r("tyNb"),h=r("6dr3"),m=r("M9IT"),f=r("0EQZ"),g=r("2Vo4");class v extends f.b{constructor(t,e){super(),this.orderService=t,this.uiUtilityService=e,this.orders=new g.a([]),this.length=new g.a(0)}connect(t){return this.orders}disconnect(t){this.orders.unsubscribe(),this.length.unsubscribe()}getAllItems(t,e,r){return this.orderService.getOrdersForAdmin(t,e,r).subscribe(t=>{console.log("Orders",t.orders),this.orders.next(t.orders),this.length.next(t.totalElements)},t=>{this.uiUtilityService.showSnackBar("Something went wrong!","Close"),console.log("Error Occured!!",t)})}}var D=r("XiUz"),R=r("+0xr"),y=r("bTqV"),F=r("NFeN");function Q(t,e){1&t&&(d.Rb(0,"th",13),d.Fc(1," Id "),d.Qb())}function w(t,e){if(1&t&&(d.Rb(0,"td",14),d.Fc(1),d.Qb()),2&t){const t=e.$implicit;d.Ab(1),d.Hc(" ",t.id," ")}}function O(t,e){1&t&&(d.Rb(0,"th",13),d.Fc(1," Price "),d.Qb())}function A(t,e){if(1&t&&(d.Rb(0,"td",14),d.Fc(1),d.ec(2,"currency"),d.Qb()),2&t){const t=e.$implicit;d.Ab(1),d.Hc(" ",d.gc(2,1,t.price,"INR")," ")}}function S(t,e){1&t&&(d.Rb(0,"th",13),d.Fc(1," Status "),d.Qb())}function x(t,e){if(1&t&&(d.Rb(0,"td",14),d.Fc(1),d.Qb()),2&t){const t=e.$implicit;d.Ab(1),d.Hc(" ",t.status," ")}}function I(t,e){1&t&&(d.Rb(0,"th",13),d.Fc(1," Purchase Date "),d.Qb())}function L(t,e){if(1&t&&(d.Rb(0,"td",14),d.Fc(1),d.ec(2,"date"),d.Qb()),2&t){const t=e.$implicit;d.Ab(1),d.Hc(" ",d.gc(2,1,t.purchaseDate,"dd/MM/yyyy")," ")}}function j(t,e){1&t&&(d.Rb(0,"th",13),d.Fc(1," User "),d.Qb())}function C(t,e){if(1&t&&(d.Rb(0,"td",14),d.Fc(1),d.Qb()),2&t){const t=e.$implicit;d.Ab(1),d.Hc(" ",t.user," ")}}function U(t,e){1&t&&(d.Rb(0,"th",13),d.Fc(1," Actions "),d.Qb())}function H(t,e){if(1&t){const t=d.Sb();d.Rb(0,"td",14),d.Rb(1,"button",15),d.Zb("click",(function(){d.uc(t);const r=e.$implicit;return d.dc().viewOrder(r)})),d.Rb(2,"mat-icon"),d.Fc(3,"launch"),d.Qb(),d.Qb(),d.Qb()}}function k(t,e){1&t&&d.Mb(0,"tr",16)}function M(t,e){1&t&&d.Mb(0,"tr",17)}const P=function(){return[5,10,25,100]};let T=(()=>{class t{constructor(t,e,r){this.orderService=t,this.uiUtilityService=e,this.router=r,this.pageSize=5,this.columnsToDisplay=["id","price","status","purchaseDate","user","actions"]}ngOnInit(){this.orderDataSource=new v(this.orderService,this.uiUtilityService),this.orderDataSource.getAllItems(0,this.pageSize)}ngAfterViewInit(){this.paginator.page.pipe(Object(b.a)(t=>this.handlePagination(t))).subscribe()}handlePagination(t){this.orderDataSource.getAllItems(t.pageIndex,t.pageSize)}viewOrder({id:t}){this.router.navigate(["/orders","admin","view",t])}}return t.\u0275fac=function(e){return new(e||t)(d.Lb(u),d.Lb(h.a),d.Lb(p.c))},t.\u0275cmp=d.Fb({type:t,selectors:[["app-order-management"]],viewQuery:function(t,e){var r;1&t&&d.Jc(m.a,!0),2&t&&d.pc(r=d.ac())&&(e.paginator=r.first)},decls:24,vars:9,consts:[["fxLayout","column","fxLayoutAlign","space-around center"],["fxFill","","mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","price"],["matColumnDef","status"],["matColumnDef","purchaseDate"],["matColumnDef","user"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(d.Rb(0,"div",0),d.Rb(1,"table",1),d.Pb(2,2),d.Dc(3,Q,2,0,"th",3),d.Dc(4,w,2,1,"td",4),d.Ob(),d.Pb(5,5),d.Dc(6,O,2,0,"th",3),d.Dc(7,A,3,4,"td",4),d.Ob(),d.Pb(8,6),d.Dc(9,S,2,0,"th",3),d.Dc(10,x,2,1,"td",4),d.Ob(),d.Pb(11,7),d.Dc(12,I,2,0,"th",3),d.Dc(13,L,3,4,"td",4),d.Ob(),d.Pb(14,8),d.Dc(15,j,2,0,"th",3),d.Dc(16,C,2,1,"td",4),d.Ob(),d.Pb(17,9),d.Dc(18,U,2,0,"th",3),d.Dc(19,H,4,0,"td",4),d.Ob(),d.Dc(20,k,1,0,"tr",10),d.Dc(21,M,1,0,"tr",11),d.Qb(),d.Mb(22,"mat-paginator",12),d.ec(23,"async"),d.Qb()),2&t&&(d.Ab(1),d.jc("dataSource",e.orderDataSource),d.Ab(19),d.jc("matHeaderRowDef",e.columnsToDisplay),d.Ab(1),d.jc("matRowDefColumns",e.columnsToDisplay),d.Ab(1),d.jc("length",d.fc(23,6,e.orderDataSource.length))("pageSize",e.pageSize)("pageSizeOptions",d.lc(8,P)))},directives:[D.d,D.c,R.j,D.f,R.c,R.e,R.b,R.g,R.i,m.a,R.d,R.a,y.a,F.a,R.f,R.h],pipes:[n.b,n.d,n.f],styles:[""]}),t})();var E=r("Wp6s"),z=r("znSr");function $(t,e){1&t&&d.Mb(0,"div")}const N=function(t){return{"pb-25":t}};function J(t,e){if(1&t&&(d.Rb(0,"mat-card",5),d.Rb(1,"mat-card-content",6),d.Mb(2,"img",7),d.Rb(3,"div",8),d.Rb(4,"p"),d.Fc(5),d.Qb(),d.Rb(6,"p"),d.Fc(7),d.ec(8,"currency"),d.Qb(),d.Rb(9,"p"),d.Fc(10),d.Qb(),d.Qb(),d.Qb(),d.Qb()),2&t){const t=e.$implicit,r=e.index,n=d.dc(2);d.jc("ngClass.lt-md",d.mc(8,N,r===n.orders.length-1)),d.Ab(2),d.kc("src",t.imagePath,d.wc),d.Ab(3),d.Hc("Item: ",t.item,""),d.Ab(2),d.Hc("Price: ",d.gc(8,5,t.price,"INR"),""),d.Ab(3),d.Hc("Purchased On: ",t.createdDate,"")}}function B(t,e){if(1&t&&(d.Rb(0,"div",3),d.Dc(1,J,11,10,"mat-card",4),d.Qb()),2&t){const t=d.dc();d.Ab(1),d.jc("ngForOf",t.orders)}}function q(t,e){1&t&&(d.Rb(0,"div",9),d.Rb(1,"mat-card",10),d.Rb(2,"mat-card-content",6),d.Fc(3," No Orders Made!! "),d.Qb(),d.Rb(4,"mat-card-actions"),d.Rb(5,"button",11),d.Fc(6,"Continue Shopping..."),d.Qb(),d.Qb(),d.Qb(),d.Qb())}let G=(()=>{class t{constructor(){this.orders=[]}ngOnInit(){console.log("Orders",this.orders)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Fb({type:t,selectors:[["app-order-item"]],inputs:{orders:"orders"},decls:6,vars:3,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["show",""],["empty",""],["fxLayout","row wrap","fxLayout.lt-md","column","fxLayoutAlign","start center","fxLayoutGap","10px"],["fxFlex","40","fxFlex.lt-md","100","class","mt-10",3,"ngClass.lt-md",4,"ngFor","ngForOf"],["fxFlex","40","fxFlex.lt-md","100",1,"mt-10",3,"ngClass.lt-md"],[1,"large-font"],["mat-card-lg-image","",3,"src"],["fxLayout","column",1,"mt-10"],["fxLayout","","fxLayoutAlign","space-around center"],["fxLayout","column","fxLayoutAlign","space-around center","fxFlex","50","fxFlex.lt-md","100"],["mat-flat-button","","routerLink","/","color","primary"]],template:function(t,e){if(1&t&&(d.Rb(0,"div"),d.Dc(1,$,1,0,"div",0),d.Dc(2,B,2,1,"ng-template",null,1,d.Ec),d.Dc(4,q,7,0,"ng-template",null,2,d.Ec),d.Qb()),2&t){const t=d.qc(3),r=d.qc(5);d.Ab(1),d.jc("ngIf",e.orders.length>0)("ngIfThen",t)("ngIfElse",r)}},directives:[n.n,D.d,D.c,D.e,n.m,E.a,D.b,z.a,E.c,E.d,E.b,y.a,p.d],pipes:[n.d],styles:[""]}),t})();function V(t,e){}function X(t,e){1&t&&d.Dc(0,V,0,0,"ng-template")}function Z(t,e){1&t&&d.Mb(0,"app-order-management")}function K(t,e){if(1&t&&(d.Rb(0,"div"),d.Mb(1,"app-order-item",4),d.Qb()),2&t){const t=d.dc(2);d.Ab(1),d.jc("orders",t.orderProjection)}}function W(t,e){if(1&t&&(d.Dc(0,K,2,1,"div",3),d.ec(1,"async")),2&t){const t=d.dc();d.jc("ngIf",d.fc(1,1,t.orderService.orderLoaded$))}}let Y=(()=>{class t{constructor(t,e,r){this.activatedRoute=t,this.orderService=e,this.uiUtilityService=r,this.isAdmin=!1,this.orderProjection=[],this.orders=[]}ngOnInit(){this.isAdmin=!!this.activatedRoute.snapshot.data.isAdmin&&this.activatedRoute.snapshot.data.isAdmin,this.isAdmin||this.getOrdersForUser()}getOrdersForUser(){return this.orderService.getOrdersForUser().subscribe(t=>this.orderProjection=t,t=>this.uiUtilityService.showErrorSnackBar(t))}}return t.\u0275fac=function(e){return new(e||t)(d.Lb(p.a),d.Lb(u),d.Lb(h.a))},t.\u0275cmp=d.Fb({type:t,selectors:[["app-order"]],decls:5,vars:3,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["adminview",""],["userview",""],[4,"ngIf"],[3,"orders"]],template:function(t,e){if(1&t&&(d.Dc(0,X,1,0,void 0,0),d.Dc(1,Z,1,0,"ng-template",null,1,d.Ec),d.Dc(3,W,2,3,"ng-template",null,2,d.Ec)),2&t){const t=d.qc(2),r=d.qc(4);d.jc("ngIf",e.isAdmin)("ngIfThen",t)("ngIfElse",r)}},directives:[n.n,T,G],pipes:[n.b],styles:[""]}),t})();var _=r("lGQG");let tt=(()=>{class t{constructor(t){this.authService=t}resolve(t){return this.authService.isAdmin()}}return t.\u0275fac=function(e){return new(e||t)(d.Vb(_.a))},t.\u0275prov=d.Hb({token:t,factory:t.\u0275fac}),t})();var et=r("wZkO");let rt=(()=>{class t{constructor(t,e,r){this.orderService=t,this.route=e,this.uiUtilityService=r}ngOnInit(){this.route.params.subscribe(t=>this.orderId=t.id),this.getTransactonDetails()}getTransactonDetails(){this.orderService.getTransactionDetails(this.orderId).subscribe(t=>this.transactionDetails=t,t=>this.uiUtilityService.showErrorSnackBar(t))}}return t.\u0275fac=function(e){return new(e||t)(d.Lb(u),d.Lb(p.a),d.Lb(h.a))},t.\u0275cmp=d.Fb({type:t,selectors:[["app-admin-transaction-view"]],decls:34,vars:11,consts:[["fxLayout","column","fxLayoutAlign","start space-around","fxFlex","90",1,"large-font"]],template:function(t,e){1&t&&(d.Rb(0,"div",0),d.Rb(1,"p"),d.Rb(2,"label"),d.Fc(3,"Transaction ID:"),d.Qb(),d.Fc(4),d.Qb(),d.Rb(5,"p"),d.Rb(6,"label"),d.Fc(7,"Bank:"),d.Qb(),d.Fc(8),d.Qb(),d.Rb(9,"p"),d.Rb(10,"label"),d.Fc(11,"Price:"),d.Qb(),d.Fc(12),d.Qb(),d.Rb(13,"p"),d.Rb(14,"label"),d.Fc(15,"Currency:"),d.Qb(),d.Fc(16),d.Qb(),d.Rb(17,"p"),d.Rb(18,"label"),d.Fc(19,"Bank:"),d.Qb(),d.Fc(20),d.Qb(),d.Rb(21,"p"),d.Rb(22,"label"),d.Fc(23,"Status:"),d.Qb(),d.Fc(24),d.Qb(),d.Rb(25,"p"),d.Rb(26,"label"),d.Fc(27,"Response:"),d.Qb(),d.Fc(28),d.Qb(),d.Rb(29,"p"),d.Rb(30,"label"),d.Fc(31,"Transaction Date:"),d.Qb(),d.Fc(32),d.ec(33,"date"),d.Qb(),d.Qb()),2&t&&(d.Ab(4),d.Hc(" ",e.transactionDetails.bankTXID," "),d.Ab(4),d.Hc(" ",e.transactionDetails.bankName," "),d.Ab(4),d.Hc(" ",e.transactionDetails.txnAmount," "),d.Ab(4),d.Hc(" ",e.transactionDetails.currency," "),d.Ab(4),d.Hc(" ",e.transactionDetails.bankName," "),d.Ab(4),d.Hc(" ",e.transactionDetails.status," "),d.Ab(4),d.Hc(" ",e.transactionDetails.respMsg," "),d.Ab(4),d.Hc(" ",d.gc(33,8,e.transactionDetails.txnDate,"dd-MM-yyyy")," "))},directives:[D.d,D.c,D.b],pipes:[n.f],styles:[""]}),t})();function nt(t,e){if(1&t&&d.Mb(0,"app-order-item",5),2&t){const t=d.dc();d.jc("orders",t.orderDetails)}}function it(t,e){1&t&&d.Mb(0,"app-admin-transaction-view")}const ct=[{path:"",component:Y,pathMatch:"full",resolve:{isAdmin:tt}},{path:"admin/view/:id",component:(()=>{class t{constructor(t,e,r){this.orderService=t,this.route=e,this.uiUtilityService=r,this.orderDetails=[]}ngOnInit(){this.route.params.subscribe(t=>this.id=t.id),this.getOrderDetails()}getOrderDetails(){return this.orderService.getOrderDetails(this.id).subscribe(t=>{console.log("response",t),this.orderDetails=t},t=>this.uiUtilityService.showErrorSnackBar(t))}}return t.\u0275fac=function(e){return new(e||t)(d.Lb(u),d.Lb(p.a),d.Lb(h.a))},t.\u0275cmp=d.Fb({type:t,selectors:[["app-admin-order-view"]],decls:6,vars:0,consts:[["fxLayout","","fxLayoutAlign","space-around center"],["fxFlex","85"],["label","Order Details"],["matTabContent",""],["label","Transaction Details"],[3,"orders"]],template:function(t,e){1&t&&(d.Rb(0,"div",0),d.Rb(1,"mat-tab-group",1),d.Rb(2,"mat-tab",2),d.Dc(3,nt,1,1,"ng-template",3),d.Qb(),d.Rb(4,"mat-tab",4),d.Dc(5,it,1,0,"ng-template",3),d.Qb(),d.Qb(),d.Qb())},directives:[D.d,D.c,et.c,D.b,et.a,et.b,G,rt],styles:[""]}),t})()}];let at=(()=>{class t{}return t.\u0275mod=d.Jb({type:t}),t.\u0275inj=d.Ib({factory:function(e){return new(e||t)},imports:[[p.e.forChild(ct)],p.e]}),t})();var st=r("hGdz");let ot=(()=>{class t{}return t.\u0275mod=d.Jb({type:t}),t.\u0275inj=d.Ib({factory:function(e){return new(e||t)},providers:[u,tt],imports:[[n.c,at,st.a]]}),t})()}}]);